# Amazon Ads Optimizer - TODO

## 核心功能

### 数据库与后端
- [x] 设计并实现数据库Schema（广告账号、广告活动、广告组、关键词、ASIN、绩效组等）
- [x] 实现广告数据CRUD API
- [x] 实现绩效组管理API
- [x] 实现竞价日志API
- [x] 实现优化设置API
- [x] 实现市场曲线建模算法

### 仪表盘与数据可视化
- [x] 监控仪表盘（核心KPI展示）
- [x] 趋势图表（转化、销售额、ACoS、ROAS）
- [x] 时间段对比分析
- [x] 绩效组概览卡片

### 绩效组管理
- [x] 创建/编辑/删除绩效组
- [x] 设置优化目标（目标ACoS、目标ROAS、每日花费上限、销售最大化）
- [x] 跨广告活动分组管理
- [x] 绩效组状态监控

### 竞价优化
- [x] 关键词出价优化（Broad/Phrase/Exact）
- [x] ASIN商品定位出价优化
- [x] 展示位置竞价调整（搜索顶部、商品详情页、其余位置）
- [x] 日内多次竞价（Intraday Bidding）
- [x] 市场曲线建模（出价-流量-转化关系）

### 竞价日志
- [x] 出价调整记录列表
- [x] 筛选和搜索功能
- [x] 调整原因说明
- [x] 导出日志功能

### 优化设置
- [x] 账号级别设置（转换值类型、转换值来源、日内竞价规则）
- [x] 广告活动级别设置（最高出价、继承配置）
- [x] 配置继承机制

### 数据导入
- [x] CSV/Excel文件上传
- [x] 亚马逊广告报告解析
- [x] 数据验证和错误处理
- [x] 批量导入进度显示

### 广告类型支持
- [x] Sponsored Products (SP) - 自动/手动广告
- [x] Sponsored Brands (SB) - 品牌推广
- [x] Sponsored Display (SD) - 展示型推广

## 视觉设计
- [x] 专业深色主题设计
- [x] 响应式布局
- [x] 数据图表样式优化

## 测试
- [x] 单元测试（竞价优化算法、路由结构、认证流程）
- [x] 示例数据生成脚本

## Amazon Advertising API 集成

### API研究
- [x] 研究Amazon Advertising API文档和权限要求
- [x] 了解API支持的广告类型和操作
- [x] 确定OAuth认证流程

### API集成开发
- [x] 实现Amazon API OAuth认证流程
- [x] 开发广告活动数据同步功能
- [x] 开发关键词和ASIN数据同步功能
- [x] 开发绩效报告数据同步功能
- [x] 实现自动出价调整API调用
- [x] 添加API调用日志和错误处理

### 测试和优化
- [x] 编写API集成单元测试
- [x] 测试数据同步准确性
- [x] 测试出价调整执行效果

## 广告自动化功能扩展（基于运营流程文档）

### P0 - 核心功能
- [x] N-Gram词根分析与批量降噪功能
- [x] 广告漏斗自动迁移系统（广泛→短语→精准）
- [x] 流量隔离与冲突检测系统
- [x] 智能竞价调整系统（爬坡、纠错、分时）

### P1 - 高优先级
- [x] 搜索词智能分类系统
- [x] 精准/短语匹配智能决策
- [x] 否词前置系统

### P2 - 中优先级
- [x] 半月纠错复盘系统
- [ ] 动态文案优化建议
- [ ] 广告活动健康度监控


## 界面优化与产品定位广告逻辑调整

### 界面布局优化
- [x] 优化仪表盘页面布局和视觉设计
- [x] 优化绩效组管理页面布局
- [x] 优化广告活动页面布局
- [x] 优化广告自动化页面布局
- [x] 优化竞价日志页面布局
- [x] 优化设置页面布局
- [x] 改进整体导航和用户体验

### 产品定位广告否定词逻辑调整
- [x] 更新数据库Schema区分广告组层级和活动层级否定词
- [x] 修改N-Gram分析逻辑，产品定位广告生成活动层级否定建议
- [x] 修改流量冲突检测逻辑，产品定位广告在活动层级处理
- [x] 更新前端界面显示否定词层级信息
- [x] 添加产品定位广告的特殊处理说明


## 新功能开发（第四阶段）

### 半月纠错复盘功能
- [x] 设计纠错复盘算法（检测归因延迟导致的错误调价）
- [x] 实现后端API接口
- [x] 创建纠错复盘前端页面
- [x] 生成纠错建议报告

### 广告活动健康度监控
- [x] 设计健康度指标体系（ACoS异常、点击率骤降、转化率下降等）
- [x] 实现异常检测算法
- [x] 创建健康度监控仪表盘
- [x] 实现预警通知功能

### 批量操作功能
- [x] 实现批量应用否定词建议
- [x] 实现批量应用出价调整
- [x] 添加批量操作确认和撤销机制
- [x] 优化批量操作的用户体验


## 新功能开发（第五阶段）

### 邮件/消息通知功能
- [x] 实现通知服务模块
- [x] 集成系统内置通知API
- [x] 健康度监控异常自动触发通知
- [x] 创建通知配置界面
- [x] 支持通知阈值设置

### 定时自动优化功能
- [x] 实现定时任务调度系统
- [x] 每日自动运行N-Gram分析
- [x] 每日自动运行智能竞价调整
- [x] 创建定时任务配置界面
- [x] 记录自动优化执行日志


## 新功能开发（第六阶段）

### 批量操作功能
- [x] 设计批量操作数据库表结构（批量任务记录、操作项明细）
- [x] 实现批量应用否定词建议API
- [x] 实现批量应用出价调整API
- [x] 添加批量操作确认机制
- [x] 实现批量操作撤销功能
- [x] 创建批量操作前端界面
- [x] 优化批量操作的用户体验
### 半月纠错复盘系统

- [x] 设计纠错复盘数据库表结构
- [x] 实现归因延迟检测算法
- [x] 实现错误调价识别逻辑
- [x] 生成纠错建议报告
- [x] 创建纠错复盘前端页面
- [x] 支持一键应用纠错建议


## 新功能开发（第七阶段）

### Amazon API多账号管理
- [x] 更新数据库Schema支持多账号存储
- [x] 添加店铺名称自定义字段
- [x] 实现多账号CRUD API
- [x] 支持账号切换功能
- [x] 更新Amazon API设置页面支持多账号管理
- [x] 添加账号列表展示和管理界面
- [x] 实现账号状态监控（连接状态、同步状态）


## 新功能开发（第八阶段）

### 账号全局切换器
- [x] 创建AccountSwitcher组件
- [x] 在DashboardLayout顶部导航栏集成切换器
- [x] 实现账号切换时的数据刷新逻辑
- [x] 添加当前账号状态指示器
- [x] 支持快捷键切换账号

### 跨账号数据汇总报表
- [x] 设计跨账号汇总数据结构
- [x] 实现后端汇总API（总花费、总销售额、平均ACoS等）
- [x] 创建汇总报表前端页面
- [x] 添加账号对比图表
- [x] 支持时间范围筛选

### 账号数据导入/导出
- [x] 实现账号配置导出API（JSON/CSV格式）
- [x] 实现账号配置批量导入API
- [x] 创建导入导出前端界面
- [x] 添加导入数据验证
- [x] 支持导入预览和确认


## 新功能开发（第九阶段）

### 账号权限管理
- [x] 设计团队成员和权限数据库表结构
- [x] 实现团队成员邀请和管理API
- [x] 实现店铺访问权限分配API
- [x] 添加权限验证中间件
- [x] 创建团队成员管理前端页面
- [x] 创建权限分配前端界面
- [x] 支持角色权限（管理员/编辑/只读）

### 数据报表定期邮件推送
- [x] 设计邮件推送配置数据库表结构
- [x] 实现邮件推送服务模块
- [x] 实现跨账号汇总报表生成
- [x] 创建定时邮件推送任务
- [x] 创建邮件推送设置前端页面
- [x] 支持自定义推送频率（每日/每周/每月）
- [x] 支持选择推送的报表类型


## 新功能开发（第十阶段）

### 操作审计日志
- [x] 设计审计日志数据库表结构
- [x] 实现审计日志记录服务
- [x] 在关键操作点集成审计日志
- [x] 实现审计日志查询API
- [x] 创建审计日志前端页面
- [x] 支持按操作类型/用户/时间筛选
- [x] 支持审计日志导出功能

### 团队协作通知
- [x] 设计协作通知配置数据库表结构
- [x] 实现协作通知服务模块
- [x] 定义重要操作触发规则
- [x] 实现通知发送逻辑
- [x] 创建协作通知设置前端页面
- [x] 支持通知渠道配置（应用内/邮件）
- [x] 支持自定义通知规则


## 新功能开发（第十一阶段）

### 广告活动预算智能分配与建议
- [x] 设计预算分配数据库表结构（分配记录、历史表现、目标设置）
- [x] 实现预算分配算法（基于ROAS、ACoS、转化率等指标）
- [x] 实现销售目标设置功能
- [x] 创建预算优化建议API
- [x] 实现预算分配模拟功能（预测效果）
- [x] 创建预算分配前端页面
- [x] 添加预算分配可视化图表
- [x] 支持一键应用预算建议
- [x] 记录预算调整历史


## 新功能开发（第十二阶段）

### Amazon Advertising API真实集成
- [x] 配置Amazon API客户端凭证（Client ID和Client Secret）
- [x] 实现OAuth授权URL生成（支持多地区endpoint）
- [x] 实现OAuth回调处理和Token交换
- [x] 实现Token刷新机制
- [x] 更新前端授权流程界面
- [x] 添加授权状态显示和管理
- [x] 测试完整的OAuth授权流程


## 新功能开发（第十三阶段）

### 预算消耗预警功能
- [x] 设计预算消耗监控数据库表结构
- [x] 实现预算消耗速度计算算法
- [x] 实现异常检测逻辑（过快/过慢消耗）
- [x] 集成通知服务发送预警
- [x] 创建预算预警配置前端界面
- [x] 支持自定义预警阈值

### 预算分配效果追踪报告
- [x] 设计效果追踪数据库表结构
- [x] 实现分配前后指标对比算法
- [x] 生成效果对比报告（ROAS、ACoS、转化率等）
- [x] 创建效果追踪报告前端页面
- [x] 支持报告导出功能

### 季节性预算调整建议
- [x] 设计季节性趋势数据库表结构
- [x] 实现历史数据季节性分析算法
- [x] 识别大促期间（Prime Day、黑五等）
- [x] 生成季节性预算调整建议
- [x] 创建季节性建议前端界面

### 广告数据自动同步
- [x] 设计数据同步任务数据库表结构
- [x] 实现广告活动数据拉取服务
- [x] 实现关键词和ASIN数据拉取服务
- [x] 实现绩效报告数据拉取服务
- [x] 创建同步任务配置前端界面
- [x] 添加同步状态监控

### API调用限流机制
- [x] 设计API调用日志和配额数据库表结构
- [x] 实现请求队列管理
- [x] 实现令牌桶限流算法
- [x] 添加API调用重试机制
- [x] 创建API使用统计前端界面


## 新功能开发（第十四阶段）

### 历史大促效果对比图表
- [x] 设计大促效果对比数据结构
- [x] 实现历史大促数据查询API
- [x] 创建大促效果对比图表组件
- [x] 在季节性建议页面集成图表
- [x] 支持多个大促活动对比

### 数据同步定时调度功能
- [x] 设计同步调度配置数据结构
- [x] 实现同步调度CRUD API
- [x] 创建定时调度配置前端界面
- [x] 实现调度任务执行逻辑
- [x] 添加调度状态监控


## 界面优化（第十五阶段）

### 侧边栏菜单优先级调整
- [x] 分析当前菜单结构和运营工作流程
- [x] 重新设计菜单分组和优先级顺序
- [x] 实现新的菜单布局
- [x] 优化菜单图标和标签

### 界面数据展示优先级调整
- [x] 优化仪表盘核心KPI展示顺序
- [x] 调整各页面数据展示优先级
- [x] 优化关键操作入口位置


### 定时调度执行历史记录
- [x] 设计执行历史数据库表结构
- [x] 实现执行历史记录API
- [x] 在DataSync页面添加执行历史Tab
- [x] 显示每次执行的详细信息（开始时间、结束时间、状态、同步记录数）

### 大促效果对比增加ROI指标
- [x] 在seasonalBudgetService中添加ROI计算
- [x] 更新API返回ROI数据
- [x] 在前端图表中展示ROI指标
- [x] 添加ROI趋势对比

### 调度失败自动重试和告警通知
- [x] 实现失败自动重试机制（最多3次）
- [x] 集成通知服务发送失败告警
- [x] 记录重试历史
- [x] 在前端显示重试状态


## 数据安全优化（第十六阶段）

### 排查人工数据输入模块
- [x] 识别所有CSV/Excel上传功能
- [x] 识别所有手动数据输入表单
- [x] 评估每个模块的错误风险等级
- [x] 确定可通过API替代的数据来源

### 移除或改造人工上传功能
- [x] 移除广告数据CSV导入功能（改为API同步）
- [x] 移除绩效数据手动上传功能
- [x] 保留必要的配置类数据输入（如目标设置）
- [x] 添加数据来源标识（API vs 手动）

### 增强API自动同步
- [x] 强制首次使用时进行API授权
- [x] 设置默认自动同步策略
- [x] 添加同步数据完整性校验
- [x] 实现数据冲突检测和告警

### 数据验证和安全机制
- [x] 添加关键操作二次确认
- [x] 实现数据变更审计追踪
- [x] 添加异常数据自动拦截
- [x] 创建数据回滚机制


## 用户体验优化（第十七阶段）

### 首次登录引导流程
- [x] 创建引导流程组件（Onboarding Wizard）
- [x] 检测用户是否首次登录
- [x] 引导步骤1：欢迎介绍系统功能
- [x] 引导步骤2：连接Amazon API授权
- [x] 引导步骤3：首次数据同步
- [x] 引导步骤4：完成设置确认
- [x] 保存引导完成状态

### API连接状态实时检测
- [x] 创建Token状态检测服务
- [x] 在Amazon API页面显示连接状态
- [x] 检测Token过期时间
- [x] Token即将过期时显示提醒
- [x] Token已过期时显示重新授权按钮
- [x] 添加自动刷新Token机制

### 关键操作确认弹窗
- [x] 创建通用确认弹窗组件
- [x] 预算调整操作添加确认弹窗
- [x] 竞价修改操作添加确认弹窗
- [x] 显示变更前后对比预览
- [x] 添加批量操作影响范围提示
- [x] 记录操作确认日志


## 用户体验优化（第十八阶段）

### 批量操作确认弹窗
- [x] 在批量操作页面集成OperationConfirmDialog组件
- [x] 批量暂停广告活动添加确认弹窗
- [x] 批量启用广告活动添加确认弹窗
- [x] 批量调整预算添加确认弹窗
- [x] 显示批量操作影响的广告活动列表

### 引导流程跳过和进度保存
- [x] 添加跳过当前步骤按钮
- [x] 添加稍后完成按钮
- [x] 保存引导进度到localStorage
- [x] 下次登录时恢复引导进度
- [x] 在设置页面添加重新开始引导入口

### 仪表盘API状态小组件
- [x] 创建API状态小组件组件
- [x] 显示API连接健康状态
- [x] 显示最近同步时间
- [x] Token过期时显示警告
- [x] 点击跳转到API设置页面


## 用户体验优化（第十九阶段）

### 批量操作历史记录功能
- [x] 设计批量操作历史数据库表结构
- [x] 实现批量操作历史记录API（创建、查询、详情）
- [x] 在BatchOperations页面添加历史记录Tab
- [x] 显示历史操作列表（时间、类型、状态、影响数量）
- [x] 实现操作详情查看功能（展示每个操作项的变更内容）
- [x] 支持按时间范围和操作类型筛选
- [x] 支持历史记录导出功能


## 侧边栏优化（第二十阶段）

### 侧边栏固定显示优化
- [x] 确保侧边栏在所有页面固定显示
- [x] 添加明显的“返回主界面/监控仪表盘”按钮
- [x] 优化菜单分组的展开/收起状态
- [x] 确保当前页面在菜单中高亮显示
- [x] 优化移动端侧边栏体验


## 广告活动页面优化（第二十一阶段）

### 广告活动类型筛选
- [x] 添加广告活动类型筛选标签（SP自动、SP手动、SB、SD等）
- [x] 点击类型标签直接筛选显示对应类型的广告活动
- [x] 保持筛选状态在页面刷新后不丢失

### 广告活动列表指标优化
- [x] 显示广告活动名称
- [x] 显示广告活动类型
- [x] 显示计费方式
- [x] 显示创建日期
- [x] 显示广告状态
- [x] 显示广告活动日预算
- [x] 显示广告活动当日花费
- [x] 显示曝光数
- [x] 显示点击数
- [x] 显示点击率
- [x] 显示广告活动累计花费
- [x] 显示广告活动日销售额
- [x] 显示广告活动累计销售额
- [x] 显示ACoS
- [x] 显示ROAS
- [x] 显示广告活动所属绩效组


## 广告活动列表功能增强（第二十二阶段）

### 列排序功能
- [x] 为所有指标列添加排序功能
- [x] 点击列标题切换升序/降序排列
- [x] 显示当前排序状态指示器（箭头图标）
- [x] 支持数值列和文本列的正确排序
- [x] 保持排序状态在筛选切换后不丢失

### 列显示/隐藏设置
- [x] 添加列设置下拉菜单
- [x] 支持勾选/取消显示各列
- [x] 保存列显示设置到localStorage
- [x] 提供"重置为默认"按钮

### 快捷操作按钮
- [x] 添加暂停/启用快捷按钮
- [x] 添加编辑预算快捷按钮
- [x] 操作前显示确认弹窗
- [x] 操作后自动刷新列表


## 广告活动AI摘要和Bug修复（第二十五阶段）

### Bug修复
- [x] 修复自动化页面audit_logs SQL查询错误

### AI摘要功能
- [ ] 实现后端AI摘要API（调用LLM生成活动表现摘要）
- [ ] 在广告活动详情页添加AI摘要卡片组件
- [ ] 显示核心表现和关键指标的智能分析


## 广告活动详情页完善（第二十六阶段）

### 数据结构
- [ ] 确认广告位置（Placement）数据表结构
- [ ] 确认搜索词（Search Terms）数据表结构
- [ ] 设计层级关系：活动 -> 广告组 -> 投放词/搜索词

### 后端API
- [ ] 实现获取广告位置表现数据API
- [ ] 实现获取广告组下投放词列表API
- [ ] 实现获取搜索词报告API
- [ ] 扩展广告活动详情API返回更多数据

### 前端页面
- [ ] 添加广告位置Tab展示不同位置的表现数据
- [ ] 完善广告组Tab，支持展开查看投放词
- [ ] 添加投放词Tab展示所有投放关键词
- [ ] 添加搜索词Tab展示客户搜索词报告
- [ ] 优化页面布局和交互体验


## 分时预算和分时竞价功能（第二十七阶段）

### 数据结构设计
- [x] 创建小时级绩效数据表（hourly_performance）存储每小时的点击、花费、销售数据
- [x] 创建分时预算规则表（dayparting_budget_rules）存储每周每天的预算分配比例
- [x] 创建分时竞价规则表（hourparting_bid_rules）存储每天每小时的出价调整倍数
- [x] 创建分时策略配置表（dayparting_strategies）存储策略配置

### 后端API
- [x] 实现获取小时级绩效数据API
- [x] 实现分析历史数据生成最优分时策略API
- [x] 实现保存/更新分时预算规则API
- [x] 实现保存/更新分时竞价规则API
- [x] 实现启用/禁用分时策略API

### 分析算法
- [x] 实现基于历史数据的每周每天表现分析
- [x] 实现基于历史数据的每天每小时表现分析
- [x] 计算最优预算分配比例（基于ROAS/ACoS）
- [x] 计算最优出价调整倍数（基于转化率和CPC）
- [x] 支持自定义目标ACoS/ROAS进行优化
- [x] 实现分时广告位置倾斜分析（搜索顶部/商品页面/其他位置）
- [x] 计算不同时段各广告位的最优出价调整比例

### 前端页面
- [ ] 创建分时策略管理页面
- [ ] 展示每周每天的预算分配热力图
- [ ] 展示每天每小时的出价调整热力图
- [ ] 支持手动调整分时规则
- [ ] 支持一键生成最优策略
- [ ] 显示策略预期效果预测

- [x] 支持数值列和文本列的正确排序
- [x] 保持排序状态在筛选切换后不丢失

### 列显示/隐藏设置
- [x] 添加列设置下拉菜单
- [x] 支持勾选/取消显示各列
- [x] 保存列显示设置到localStorage
- [x] 提供"重置为默认"按钮

### 快捷操作按钮
- [x] 添加暂停/启用快捷按钮
- [x] 添加编辑预算快捷按钮
- [x] 操作前显示确认弹窗
- [x] 操作后自动刷新列表


## 侧边栏导航修复（第二十四阶段）

### 缺少DashboardLayout的页面
- [x] BudgetTracking.tsx - 预算追踪页面
- [x] DataSync.tsx - 数据同步页面
- [x] SeasonalBudget.tsx - 季节性预算页面
- [x] BudgetAlerts.tsx - 预算预警页面


## 广告活动AI摘要和Bug修复（第二十五阶段）

### Bug修复
- [x] 修复自动化页面audit_logs SQL查询错误

### AI摘要功能
- [x] 实现后端AI摘要API（调用LLM生成活动表现摘要）
- [ ] 在广告活动详情页添加AI摘要卡片组件
- [ ] 显示核心表现和关键指标的智能分析


## 分时预算和分时竞价功能（第二十七阶段）

### 数据结构设计
- [x] 创建小时级绩效数据表（hourly_performance）存储每小时的点击、花费、销售数据
- [x] 创建分时预算规则表（dayparting_budget_rules）存储每周每天的预算分配比例
- [x] 创建分时竞价规则表（hourparting_bid_rules）存储每天每小时的出价调整倍数
- [x] 创建分时策略配置表（dayparting_strategies）存储策略配置

### 后端API
- [x] 实现获取小时级绩效数据API
- [x] 实现分析历史数据生成最优分时策略API
- [x] 实现保存/更新分时预算规则API
- [x] 实现保存/更新分时竞价规则API
- [x] 实现启用/禁用分时策略API

### 分析算法
- [x] 实现基于历史数据的每周每天表现分析
- [x] 实现基于历史数据的每天每小时表现分析
- [x] 计算最优预算分配比例（基于ROAS/ACoS）
- [x] 计算最优出价调整倍数（基于转化率和CPC）
- [x] 支持自定义目标ACoS/ROAS进行优化
- [x] 实现分时广告位置倾斜分析（搜索顶部/商品页面/其他位置）
- [x] 计算不同时段各广告位的最优出价调整比例

### 前端页面
- [x] 创建分时策略管理页面
- [x] 显示每周每天的表现热力图
- [x] 显示每天每小时的表现热力图
- [x] 支持手动调整预算分配比例
- [x] 支持手动调整出价倍数
- [x] 显示策略执行日志
- [x] 添加分时策略导航菜单


## 投放词快捷操作功能（第二十九阶段）

### 后端API
- [ ] 实现关键词出价更新API
- [ ] 实现关键词状态更新API（启用/暂停）
- [ ] 实现商品定向出价更新API
- [ ] 实现商品定向状态更新API

### 前端UI
- [ ] 在投放词列表添加操作列
- [ ] 添加编辑出价按钮和弹窗
- [ ] 添加启用/暂停切换按钮
- [ ] 添加操作确认弹窗
- [ ] 操作后自动刷新列表

- [x] 支持数值列和文本列的正确排序
- [x] 保持排序状态在筛选切换后不丢失

### 列显示/隐藏设置
- [x] 添加列设置下拉菜单
- [x] 支持勾选/取消显示各列
- [x] 保存列显示设置到localStorage
- [x] 提供"重置为默认"按钮

### 快捷操作按钮
- [x] 添加暂停/启用快捷按钮
- [x] 添加编辑预算快捷按钮
- [x] 操作前显示确认弹窗
- [x] 操作后自动刷新列表


## 广告活动详情页完善（第二十八阶段）- 已完成

### 后端API
- [x] 实现获取广告活动下属广告组API
- [x] 实现获取广告活动下属投放词API（关键词+商品定向）
- [x] 实现获取广告活动下属搜索词API
- [x] 实现获取广告活动历史绩效数据API

### 前端页面
- [x] 创建广告活动详情页组件
- [x] 添加概览Tab（核心指标卡片）
- [x] 添加广告组Tab（广告组列表）
- [x] 添加投放词Tab（关键词+商品定向列表）
- [x] 添加搜索词Tab（客户搜索词列表）
- [x] 添加关键词Tab（按销售额排序）
- [x] 实现点击广告活动名称跳转到详情页


## 投放词快捷操作功能（第二十九阶段）- 已完成

### 后端API
- [x] 实现关键词出价更新API
- [x] 实现关键词状态更新API（启用/暂停）
- [x] 实现商品定向出价更新API
- [x] 实现商品定向状态更新API

### 前端界面
- [x] 在投放词列表添加编辑出价按钮
- [x] 在投放词列表添加暂停/启用按钮
- [x] 实现编辑出价弹窗（显示当前出价、输入新出价）
- [x] 实现暂停/启用确认弹窗
- [x] 操作成功后自动刷新列表


### 投放词批量操作和筛选功能（第三十阶段）- 已完成
### 后端API
- [x] 更新投放词查询API支持订单数据返回
- [x] 实现批量更新出价API
- [x] 实现批量更新状态API（启用/暂停）
- [x] 支持多维度筛选参数（匹配方式、状态、出价范围、点击范围、花费范围、销售额范围、ACoS范围、ROAS范围、订单数范围）
### 前端界面
- [x] 在投放词列表添加订单数列
- [x] 添加全选/取消全选复选框
- [x] 添加单行选择复选框
- [x] 添加批量操作工具栏（选中N项后显示）
- [x] 实现批量启用功能
- [x] 实现批量暂停功能
- [x] 实现批量修改竞价功能（支持固定值、增加百分比、减少百分比）
- [x] 添加筛选面板组件
- [x] 支持按匹配方式筛选（广泛、短语、精准、商品定向）
- [x] 支持按状态筛选（启用、暂停）
- [x] 支持按出价范围筛选
- [x] 支持按点击范围筛选
- [x] 支持按花费范围筛选
- [x] 支持按销售额范围筛选
- [x] 支持按ACoS范围筛选
- [x] 支持按ROAS范围筛选
- [x] 支持按订单数范围筛选
- [x] 支持多维度组合筛选
- [x] 添加清除筛选按钮钮


### 投放词和搜索词模块优化（第三十一阶段）- 已完成
### 投放词模块优化
- [x] 添加点击率(CTR)数据列
- [x] 添加转化率(CVR)数据列
- [x] 调整列顺序：投放词→类型→匹配方式→状态→出价→展示→点击→点击率→花费→订单→销售额→转化率→ACoS→ROAS→操作
### 搜索词模块优化
- [x] 添加完整数据列：客户搜索词、源头投放词、匹配方式、展示、点击、点击率、花费、订单、销售额、转化率、ACoS、ROAS
- [x] 调整列顺序符合运营阅读习惯
- [x] 添加否定关键词功能（短语否定/精准否定）
- [x] 添加高价值搜索词迁移功能（开发中）
- [x] 添加多维度筛选功能（按ACoS、转化率、花费、订单等筛选）
### 搜索词分析核心功能
- [x] 支持筛选有价值但未在关注列表中的搜索词
- [x] 支持快速筛选高消耗0转化或低转化搜索词
- [x] 支持对低效搜索词进行短语否定或精准否定
- [x] 支持高价值搜索词迁移到指定广告组（开发中）告组


## 投## 投放词和搜索词高级功能（第三十二阶段）- 部分完成
### 投放词模块优化
- [x] 添加点击率(CTR)数据列
- [x] 添加转化率(CVR)数据列
- [x] 调整列顺序符合运营习惯
- [x] 添加点击率和转化率筛选条件
### 搜索词模块完善
- [x] 添加完整数据列：搜索词、源头投放词、匹配方式、展示、点击、点击率、花费、订单、销售额、转化率、ACoS、ROAS
- [x] 添加否定关键词功能（短语否定/精准否定）
- [x] 添加多维度筛选功能
- [x] 支持筛选高消耗0转化搜索词
- [x] 支持高价值搜索词迁移（开发中）
### 投放词趋势图
- [ ] 点击投放词查看历史表现趋势
- [ ] 展示点击、花费、ACoS随时间变化
### 筛选预设功能
- [ ] 支持保存常用筛选条件为预设
- [ ] 支持快速切换筛选预设
- [ ] 预设保存到localStorage


## 投放词模块优化（第三十三阶段）- 已完成

### 筛选项展示优化
- [x] 投放词列表筛选项默认展开显示
- [x] 保留筛选按钮用于切换显示/隐藏

### CPC数据列
- [x] 在投放词列表添加CPC（每次点击成本）数据列
- [x] CPC计算公式：花费/点击数
- [x] 在列顺序中合理放置CPC列（出价列后面）

### 批量出价调整功能增强
- [x] 新增"按CPC倍数设置"调整方式（出价=CPC×N倍）
- [x] 新增"按CPC百分比提高"调整方式
- [x] 新增"按CPC百分比降低"调整方式
- [x] 更新批量出价弹窗UI支持新的调整方式
- [x] 添加CPC调整方式说明提示


## AI智能分析一键执行功能（第三十四阶段）

### 后端API
- [ ] 设计一键执行优化建议的数据结构
- [ ] 实现投放词出价批量调整API
- [ ] 实现投放词状态批量变更API（启用/暂停）
- [ ] 实现搜索词批量否定API（词组否定/精准否定）
- [ ] 添加执行日志记录

### 前端界面
- [ ] 在AI分析结果中为每条建议添加执行按钮
- [ ] 添加批量选择和一键执行所有建议功能
- [ ] 显示执行状态和结果反馈
- [ ] 添加执行确认弹窗（显示即将执行的操作详情）
- [ ] 支持撤销最近执行的操作


## AI智## AI智能分析一键执行与效果复盘功能（第三十四阶段）- 已完成
### 数据库设计
- [x] 创建AI优化执行记录表（执行时间、执行内容、执行状态）
- [x] 创建AI效果预测表（7天/14天/30天预测数据）
- [x] 创建AI优化复盘表（实际数据、预测数据、达成率）
### 后端API - 一键执行
- [x] 实现投放词出价批量调整API
- [x] 实现投放词状态批量变更API（启用/暂停）
- [x] 实现搜索词批量否定API（词组否定/精准否定）
- [x] 添加执行日志记录
### 后端API - 效果预估
- [x] 实现基于历史数据的效果预估算法
- [x] 预估7天、14天、30天后的花费变化
- [x] 预估7天、14天、30天后的销售额变化
- [x] 预估7天、14天、30天后的ACoS和ROAS变化
### 后端API - 复盘分析
- [x] 实现复盘数据采集（在预测时间节点自动采集实际数据）
- [x] 实现预测vs实际数据对比分析
- [x] 计算优化目标达成率
- [x] 生成复盘报告
### 前端界面 - AI分析模块增强
- [x] 在AI分析结果中为每条建议添加执行按钮
- [x] 添加批量选择和一键执行所有建议功能
- [x] 显示效果预估数据（7天/14天/30天预测）
- [x] 添加执行确认弹窗（显示即将执行的操作详情和预估效果）
### 前端界面 - AI优化执行记录与复盘页面
- [x] 创建AI优化执行历史列表页面
- [x] 显示每次执行的具体内容和时间
- [x] 创建复盘分析页面（预测vs实际对比）
- [x] 显示优化目标达成率图表
- [x] 支持按时间范围筛选执行记录


## 投放词历史趋势图功能（第三十五阶段）- 已完成

### 后端API
- [x] 设计历史数据查询API（支持按时间范围查询）
- [x] 实现关键词历史数据查询（点击、花费、销售额、ACoS、ROAS等）
- [x] 实现商品定向历史数据查询
- [x] 支持7天、14天、30天、60天时间范围

### 前端界面
- [x] 创建趋势图组件（使用Recharts）
- [x] 创建历史趋势弹窗
- [x] 展示点击趋势图
- [x] 展示花费趋势图
- [x] 展示ACoS趋势图
- [x] 展示ROAS趋势图
- [x] 支持时间范围切换
- [x] 在投放词列表中添加查看趋势入口（点击投放词名称即可查看）


## 广告优化中心界面设计（第三十六阶段）- 已完成

### 界面草图设计
- [x] 设计广告优化中心整体布局
- [x] 设计广告活动列表与投放词内嵌展开交互
- [x] 设计AI优化建议常驻面板
- [x] 设计搜索词Tab切换视图
- [x] 设计投放词历史趋势侧边面板
- [x] 创建详细的界面设计文档


## 搜索词批量转投放词功能（第三十七阶段）- 已完成

### 后端API
- [x] 实现批量添加投放关键词API
- [x] 支持选择目标广告组
- [x] 支持选择匹配方式（广泛/短语/精准）
- [x] 支持设置初始出价
- [x] 自动检查重复关键词并跳过

### 前端界面
- [x] 在搜索词列表添加批量选择功能（复选框+全选）
- [x] 添加"添加为投放词"批量操作按钮
- [x] 创建添加投放词弹窗（选择广告组、匹配方式、出价）
- [x] 显示选中搜索词预览
- [x] 显示操作结果反馈（成功/失败数量）


#### 智能优化系统架构重构（第三十八阶段）- 设计完成
### 核心理念转变
- [x] 从"人工操作为主、工具辅助"转变为"算法自主决策执行、人工仅做监督调整"
- [x] 将广告自动化、分时策略、批量操作、纠错复盘整合到广告管理功能中
### 算法自主决策引擎
- [x] 设计决策引擎核心架构
- [x] 设计数据采集与分析模块
- [x] 设计规则引擎与条件判断
- [x] 设计自动执行与反馈记录
- [x] 设计人工干预接口
### 广告位置智能倾斜（Adspert核心优势）
- [x] 设计Top of Search、Product Page、Rest of Search的表现分析
- [x] 设计最优位置出价比例计算算法
- [x] 设计位置倾斜自动调整流程
- [x] 设计位置表现可视化分析界面
### 功能整合
- [x] 设计分时策略整合到广告活动管理
- [x] 设计批量操作整合为自动触发规则
- [x] 设计纠错复盘整合为闭环反馈系统
- [x] 设计简化导航结构，减少功能分散
### 界面重构
- [x] 设计算法控制面板（启用/暂停/参数调整）
- [x] 设计自动化执行日志面板
- [x] 设计人工干预入口
- [x] 设计效果对比仪表盘
### 设计文档输出
- [x] 算法自主决策引擎架构文档
- [x] 广告位置智能倾斜设计文档
- [x] 整合系统架构设计文档仪表盘


## 执行频率控制优化（第三十九阶段）- 设计完成

### 时段分析策略（参考Adspert）
- [x] 将24小时分割为12个2小时时段进行数据分析
- [x] 每个时段独立计算转化率、ACoS、ROAS等指标
- [x] 基于时段数据进行智能调整决策

### 执行频率限制
- [x] 同一投放词24小时内最多调整**1次**出价
- [x] 同一广告活动24小时内最多调整**1次**预算
- [x] 位置倾斜比例每**2小时**最多调整**1次**
- [x] 批量操作每次最多影响**100个**投放词

### 频率控制机制
- [x] 设计调整冷却期记录机制
- [x] 设计频率限制校验逻辑
- [x] 设计超出限制时加入待执行队列
- [x] 设计频率限制配置界面


## 广告位置智能倾斜算法详细设计（第四十阶段）

### 评分算法设计
- [ ] 设计位置效率评分公式（综合ROAS、ACoS、CVR、CPC）
- [ ] 设计权重分配策略（根据优化目标动态调整权重）
- [ ] 设计数据置信度评估（基于点击量和花费判断数据可靠性）

### 倾斜比例计算
- [ ] 设计基于评分差异的倾斜比例计算公式
- [ ] 设计倾斜上下限约束（0%-200%）
- [ ] 设计渐进式调整策略（避免大幅波动）

### 调整决策逻辑
- [ ] 设计调整触发条件（评分差异阈值、数据量要求）
- [ ] 设计调整幅度控制（单次最大调整步长）
- [ ] 设计安全边界和异常保护机制

### 可视化草图
- [ ] 生成算法流程图
- [ ] 生成界面交互草图



## ## 核心功能实现（第四十一阶段）- 开发中
### 位置倾斜频率调整
- [x] 将位置倾斜调整频率从"每刘2次"改为"每2小时1次"
- [x] 更新设计文档中的频率配置
### 广告位置智能倾斜功能实现
- [x] 创建位置表现数据表（placement_performance）
- [ ] 创建位置调整历史表（placement_adjustments）
- [ ] 实现位置数据同步API
- [ ] 实现位置效率评分算法
- [ ] 实现最优倾斜比例计算
- [ ] 实现位置倾斜自动调整
- [ ] 创建位置倾斜管理前端页面
### 2小时时段数据采集
- [x] 创建时段表现数据表（hourly_performance）
- [ ] 实现2小时时段数据采集API
- [ ] 实现时段效率分析算法
### 广告优化中心界面重构
- [ ] 创建新的广告优化中心页面
- [ ] 实现广告活动列表展开/折叠投放词
- [ ] 集成AI优化建议常驻面板
- [ ] 集成位置智能倾斜面板
- [ ] 更新导航结构构



## Amazon API频率限制分析（第四十二阶段）- 已完成

### API限制研究
- [x] 查阅Amazon Advertising API官方文档
- [x] 分析初始限制（1 TPS, 8640 TPD）
- [x] 分析基于收入的动态限制调整机制
- [x] 了解不同API端点的限制差异

### 合规优化频率设计
- [x] 设计API调用预算分配（数据同步40%、出价调整25%、位置倾斜15%等）
- [x] 设计2小时时段分析策略（与Adspert一致）
- [x] 设计请求队列管理和限流机制
- [x] 设计429错误处理和重试策略

### 频率限制配置
- [x] 投放词出价：24小时1次/词
- [x] 预算调整：24小时1次/活动
- [x] 位置倾斜：2小时1次/活动（每日最多12次）
- [x] 批量操作：每次最多100个

### 文档输出
- [x] 创建Amazon API频率限制分析文档
- [x] 更新系统设计文档中的频率配置



## 广告位置智能倾斜功能（第二十五阶段）

### 后端服务开发
- [x] 创建placementOptimizationService.ts服务文件
- [x] 实现位置效率评分算法（综合ROAS、ACoS、CVR、CPC等指标）
- [x] 实现最优倾斜比例计算算法
- [x] 实现位置表现数据查询功能
- [x] 实现位置倾斜设置更新功能
- [x] 实现自动优化执行功能
- [x] 实现批量优化功能

### 后端API开发
- [x] 添加placement路由到routers.ts
- [x] 实现getPerformance API（获取位置表现数据）
- [x] 实现getSettings API（获取当前倾斜设置）
- [x] 实现generateSuggestions API（生成优化建议）
- [x] 实现applyAdjustments API（应用调整）
- [x] 实现optimizeCampaign API（一键优化）
- [x] 实现batchOptimize API（批量优化）
- [x] 实现getHistory API（获取调整历史）

### 前端页面开发
- [x] 创建PlacementOptimization.tsx页面
- [x] 实现账号和广告活动选择器
- [x] 实现位置表现概览卡片
- [x] 实现位置表现详情表格
- [x] 实现分析结果弹窗
- [x] 实现确认应用弹窗
- [x] 实现优化设置弹窗
- [x] 添加路由配置
- [x] 添加侧边栏菜单项

### 待完成功能
- [ ] 实现2小时时段数据采集服务
- [ ] 实现位置调整历史记录查询
- [ ] 添加位置表现趋势图表
- [ ] 集成到广告活动详情页


## Adspert核心算法整合（第二十六阶段）
### 数据库设计
- [x] 创建市场曲线模型表 (market_curve_models)
- [x] 创建决策树模型表 (decision_tree_models)
- [x] 创建关键词预测表 (keyword_predictions)
- [x] 创建竞价对象利润估算表 (bid_object_profit_estimates)
- [x] 创建优化建议表 (optimization_recommendations)
- [x] 创建出价表现历史表 (bid_performance_history)
### 市场曲线服务
- [x] 实现展现曲线建模（对数回归）
- [x] 实现点击率曲线建模
- [x] 实现利润曲线计算 (Profit = Clicks × (CVR × AOV - CPC))
- [x] 实现利润最大化出价点计算（黄金分割搜索）
- [x] 编写市场曲线服务单元测试 (17个测试通过)
### 决策树服务
- [x] 实现决策树构建算法（CART）
- [x] 实现决策树预测服务
- [x] 实现长尾关键词预测
- [x] 实现贝叶斯更新（结合历史数据）
- [x] 编写决策树服务单元测试 (18个测试通过)
### 高级位置优化服务
- [x] 整合市场曲线、决策树和利润计算
- [x] 实现竞价对象层面的利润估算
- [x] 实现较低位置调整策略（Adspert策略）
- [x] 实现综合优化建议生成
### 后端API更新
- [x] 添加 advancedPlacement 路由
- [x] 添加市场曲线查询API (buildMarketCurve)
- [x] 添加决策树训练API (trainDecisionTree)
- [x] 添加利润分析API (analyzePlacementProfit)
- [x] 添加优化建议API (getRecommendations, applyRecommendation)
### 前端界面升级
- [x] 创建 AdvancedPlacementOptimization 页面
- [x] 添加市场曲线可视化图表
- [x] 添加决策树预测结果展示
- [x] 添加利润估算展示
- [x] 添加优化建议详情展示
- [x] 添加侧边栏菜单项
- [x] 添加路由配置


## 优化功能整合到广告管理模块（第二十七阶段）

### 设计目标
- [ ] 将分散的优化功能整合到核心广告管理模块
- [ ] 实现"算法决策执行，人只监督"的架构
- [ ] 简化用户界面，减少复杂的独立功能页面

### 后端重构：统一自动优化引擎
- [ ] 创建UnifiedOptimizationEngine服务
- [ ] 整合广告自动化（N-Gram、漏斗迁移、流量隔离）
- [ ] 整合位置倾斜和高级位置优化算法
- [ ] 整合分时策略（Dayparting）
- [ ] 整合纠错复盘逻辑
- [ ] 实现统一的优化任务调度器
- [ ] 实现优化执行日志记录

### 广告活动页面整合
- [ ] 添加"自动优化状态"列显示当前优化状态
- [ ] 添加"最近优化"列显示最近的自动调整
- [ ] 添加活动详情中的优化监督面板
- [ ] 显示算法决策历史和执行结果
- [ ] 添加一键暂停/恢复自动优化开关

### 绩效组管理页面整合
- [ ] 添加组级别自动优化总开关
- [ ] 显示组内所有活动的优化状态汇总
- [ ] 添加组级别优化目标设置（ACoS/ROAS目标）
- [ ] 显示组级别优化效果统计

### 预算分配页面整合
- [ ] 整合智能预算自动调整功能
- [ ] 显示预算消耗预警状态
- [ ] 添加季节性预算建议展示
- [ ] 显示预算调整历史和效果

### 侧边栏菜单简化
- [ ] 移除独立的"广告自动化"菜单项
- [ ] 移除独立的"位置倾斜"菜单项
- [ ] 移除独立的"高级位置优化"菜单项
- [ ] 移除独立的"分时策略"菜单项
- [ ] 移除独立的"批量操作"菜单项
- [ ] 保留核心的监控和管理菜单
- [ ] 添加"优化引擎"状态指示器

### 测试验证
- [ ] 编写统一优化引擎单元测试
- [ ] 验证整合后的功能正常工作


## 功能整合完成更新

### 后端重构：统一自动优化引擎 - 已完成
- [x] 创建UnifiedOptimizationEngine服务 (unifiedOptimizationEngine.ts)
- [x] 整合竞价调整、位置倾斜、分时策略、否定词等优化类型
- [x] 实现多种执行模式 (full_auto, semi_auto, manual, disabled)
- [x] 添加 unifiedOptimization 路由到 routers.ts

### 广告活动页面整合 - 已完成
- [x] 添加"自动优化"列显示优化状态
- [x] 添加待执行决策和今日执行数量徽章
- [x] 更新页面副标题显示"算法自动决策执行，人只做监督"

### 绩效组管理页面整合 - 已完成
- [x] 添加自动优化引擎状态卡片
- [x] 添加执行模式显示 (半自动模式)
- [x] 添加今日执行和待审批统计
- [x] 添加自动优化开关

### 预算分配页面整合 - 已完成
- [x] 更新页面副标题显示"算法自动决策执行，人只做监督"

### 侧边栏菜单简化 - 已完成
- [x] 移除独立的优化功能页面 (广告自动化、位置倾斜、高级位置优化、分时策略、批量操作)
- [x] 添加"优化中心"统一入口
- [x] 保留纠错复盘和季节性建议作为独立功能

### 优化中心页面 - 已完成
- [x] 创建 OptimizationCenter.tsx 页面
- [x] 实现优化引擎状态概览
- [x] 实现优化类型统计卡片
- [x] 实现待审批决策列表
- [x] 实现引擎设置面板
- [x] 实现执行历史记录

### 单元测试 - 已完成
- [x] 编写统一优化引擎测试 (15个测试通过)
- [x] 测试利润最大化公式
- [x] 测试位置倾斜策略
- [x] 测试批量执行逻辑
