{
  "query": "\nCREATE TABLE IF NOT EXISTS marginal_benefit_history (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  campaign_id VARCHAR(64) NOT NULL,\n  placement_type ENUM('top_of_search', 'product_page', 'rest_of_search') NOT NULL,\n  analysis_date DATE NOT NULL,\n  current_adjustment INT DEFAULT 0,\n  marginal_roas DECIMAL(10, 4),\n  marginal_acos DECIMAL(10, 4),\n  marginal_sales DECIMAL(12, 2),\n  marginal_spend DECIMAL(12, 2),\n  elasticity DECIMAL(10, 4),\n  diminishing_point INT,\n  optimal_range_min INT,\n  optimal_range_max INT,\n  confidence DECIMAL(5, 4),\n  data_points INT,\n  total_impressions INT,\n  total_clicks INT,\n  total_spend DECIMAL(12, 2),\n  total_sales DECIMAL(12, 2),\n  total_orders INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX mb_history_account_campaign (account_id, campaign_id),\n  INDEX mb_history_date (analysis_date)\n);\n\nCREATE TABLE IF NOT EXISTS marginal_benefit_applications (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  campaign_id VARCHAR(64) NOT NULL,\n  user_id INT NOT NULL,\n  optimization_goal ENUM('maximize_roas', 'minimize_acos', 'maximize_sales', 'balanced') NOT NULL,\n  application_status ENUM('pending', 'applied', 'failed', 'rolled_back') DEFAULT 'pending',\n  before_top_of_search INT,\n  before_product_page INT,\n  after_top_of_search INT,\n  after_product_page INT,\n  expected_sales_change DECIMAL(12, 2),\n  expected_spend_change DECIMAL(12, 2),\n  expected_roas_change DECIMAL(10, 4),\n  expected_acos_change DECIMAL(10, 4),\n  actual_sales_change DECIMAL(12, 2),\n  actual_spend_change DECIMAL(12, 2),\n  actual_roas_change DECIMAL(10, 4),\n  actual_acos_change DECIMAL(10, 4),\n  evaluated_at TIMESTAMP NULL,\n  application_note TEXT,\n  error_message TEXT,\n  applied_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX mb_app_account_campaign (account_id, campaign_id),\n  INDEX mb_app_status (application_status)\n);\n\nCREATE TABLE IF NOT EXISTS batch_marginal_benefit_analysis (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  user_id INT NOT NULL,\n  analysis_name VARCHAR(255),\n  campaign_ids JSON,\n  campaign_count INT DEFAULT 0,\n  optimization_goal ENUM('maximize_roas', 'minimize_acos', 'maximize_sales', 'balanced') NOT NULL,\n  analysis_status ENUM('pending', 'running', 'completed', 'failed') DEFAULT 'pending',\n  total_current_spend DECIMAL(15, 2),\n  total_current_sales DECIMAL(15, 2),\n  total_expected_spend DECIMAL(15, 2),\n  total_expected_sales DECIMAL(15, 2),\n  overall_roas_change DECIMAL(10, 4),\n  overall_acos_change DECIMAL(10, 4),\n  avg_confidence DECIMAL(5, 4),\n  analysis_results JSON,\n  recommendations JSON,\n  error_message TEXT,\n  started_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX batch_mb_account (account_id),\n  INDEX batch_mb_status (analysis_status)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user GdNjKxkKZgeVtwE.root --database 5MUJ5aHkiAehb9iTzNdxTq --execute \nCREATE TABLE IF NOT EXISTS marginal_benefit_history (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  campaign_id VARCHAR(64) NOT NULL,\n  placement_type ENUM('top_of_search', 'product_page', 'rest_of_search') NOT NULL,\n  analysis_date DATE NOT NULL,\n  current_adjustment INT DEFAULT 0,\n  marginal_roas DECIMAL(10, 4),\n  marginal_acos DECIMAL(10, 4),\n  marginal_sales DECIMAL(12, 2),\n  marginal_spend DECIMAL(12, 2),\n  elasticity DECIMAL(10, 4),\n  diminishing_point INT,\n  optimal_range_min INT,\n  optimal_range_max INT,\n  confidence DECIMAL(5, 4),\n  data_points INT,\n  total_impressions INT,\n  total_clicks INT,\n  total_spend DECIMAL(12, 2),\n  total_sales DECIMAL(12, 2),\n  total_orders INT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX mb_history_account_campaign (account_id, campaign_id),\n  INDEX mb_history_date (analysis_date)\n);\n\nCREATE TABLE IF NOT EXISTS marginal_benefit_applications (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  campaign_id VARCHAR(64) NOT NULL,\n  user_id INT NOT NULL,\n  optimization_goal ENUM('maximize_roas', 'minimize_acos', 'maximize_sales', 'balanced') NOT NULL,\n  application_status ENUM('pending', 'applied', 'failed', 'rolled_back') DEFAULT 'pending',\n  before_top_of_search INT,\n  before_product_page INT,\n  after_top_of_search INT,\n  after_product_page INT,\n  expected_sales_change DECIMAL(12, 2),\n  expected_spend_change DECIMAL(12, 2),\n  expected_roas_change DECIMAL(10, 4),\n  expected_acos_change DECIMAL(10, 4),\n  actual_sales_change DECIMAL(12, 2),\n  actual_spend_change DECIMAL(12, 2),\n  actual_roas_change DECIMAL(10, 4),\n  actual_acos_change DECIMAL(10, 4),\n  evaluated_at TIMESTAMP NULL,\n  application_note TEXT,\n  error_message TEXT,\n  applied_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX mb_app_account_campaign (account_id, campaign_id),\n  INDEX mb_app_status (application_status)\n);\n\nCREATE TABLE IF NOT EXISTS batch_marginal_benefit_analysis (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  account_id INT NOT NULL,\n  user_id INT NOT NULL,\n  analysis_name VARCHAR(255),\n  campaign_ids JSON,\n  campaign_count INT DEFAULT 0,\n  optimization_goal ENUM('maximize_roas', 'minimize_acos', 'maximize_sales', 'balanced') NOT NULL,\n  analysis_status ENUM('pending', 'running', 'completed', 'failed') DEFAULT 'pending',\n  total_current_spend DECIMAL(15, 2),\n  total_current_sales DECIMAL(15, 2),\n  total_expected_spend DECIMAL(15, 2),\n  total_expected_sales DECIMAL(15, 2),\n  overall_roas_change DECIMAL(10, 4),\n  overall_acos_change DECIMAL(10, 4),\n  avg_confidence DECIMAL(5, 4),\n  analysis_results JSON,\n  recommendations JSON,\n  error_message TEXT,\n  started_at TIMESTAMP NULL,\n  completed_at TIMESTAMP NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  INDEX batch_mb_account (account_id),\n  INDEX batch_mb_status (analysis_status)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 945
}