# Amazon Advertising API 频率限制分析与系统优化策略

**作者**: Manus AI  
**日期**: 2026年1月6日  
**版本**: 1.0

---

## 1. 概述

本文档基于Amazon Advertising API官方文档和第三方资料，分析API调用频率限制，并据此设计符合平台规定的自动优化策略。

---

## 2. Amazon Advertising API 频率限制

### 2.1 初始限制（前30天）

根据Amazon官方文档，新创建的API凭证在前30天内受以下限制：

| 限制类型 | 限制值 | 说明 |
|---------|--------|------|
| **TPS (每秒事务数)** | 1 请求/秒 | 最大每秒API调用次数 |
| **TPD (每日事务数)** | 8,640 请求/天 | 最大每日API调用次数 |

### 2.2 基于收入的调整限制（30天后）

30天后，API限制根据发货商品收入动态调整：

| 收入基准 | 获得的限制 | 最大值 |
|---------|-----------|--------|
| 每5美分发货收入 | +1 TPD | 无上限 |
| 每$4,320发货收入 | +1 TPS | 最大10 TPS |

### 2.3 不同API端点的限制

根据搜索结果，不同类型的API端点有不同的限制：

| API类型 | 频率限制 | 备注 |
|---------|---------|------|
| **Campaign Management** | 约10 TPS | 广告活动管理操作 |
| **Bid Adjustments (DSP)** | 因端点而异 | 出价调整操作 |
| **Reporting API** | 较宽松 | 报告生成和下载 |
| **Data Provider API** | 100 TPS | 数据提供商接口 |

### 2.4 超限处理

当超过API限制时：
- 返回 **429 TooManyRequests** 错误
- 连续30天无销售可能导致API访问权限丢失
- 恢复访问需要在发货销售后2天内

---

## 3. 系统优化频率设计

### 3.1 设计原则

基于API限制，我们的自动优化系统需要遵循以下原则：

1. **保守估算**: 假设初始阶段只有1 TPS限制
2. **批量处理**: 尽量合并请求，减少API调用次数
3. **智能调度**: 错峰执行，避免集中调用
4. **优先级队列**: 重要操作优先执行

### 3.2 API调用预算分配

假设每日8,640次API调用限制，分配如下：

| 功能模块 | 分配比例 | 每日调用次数 | 每小时调用次数 |
|---------|---------|-------------|---------------|
| **数据同步** | 40% | 3,456 | 144 |
| **出价调整** | 25% | 2,160 | 90 |
| **位置倾斜调整** | 15% | 1,296 | 54 |
| **预算调整** | 10% | 864 | 36 |
| **状态变更** | 5% | 432 | 18 |
| **预留缓冲** | 5% | 432 | 18 |

### 3.3 优化执行频率设计

基于API限制和Adspert的2小时时段分析模式，设计以下执行频率：

| 操作类型 | 执行频率 | API调用/次 | 每日最大调用 | 合规性 |
|---------|---------|-----------|-------------|--------|
| **数据同步** | 每2小时 | 约200次 | 2,400次 | ✅ 合规 |
| **投放词出价调整** | 每24小时1次/词 | 1次/词 | 视词数而定 | ✅ 合规 |
| **位置倾斜调整** | 每2小时1次/活动 | 1次/活动 | 12次/活动/天 | ✅ 合规 |
| **预算调整** | 每24小时1次/活动 | 1次/活动 | 1次/活动/天 | ✅ 合规 |
| **批量操作** | 每次最多100个 | 100次 | 视需求而定 | ✅ 合规 |

### 3.4 2小时时段分析策略

将24小时分割为12个时段进行数据分析和决策：

```
时段划分:
00:00-02:00 | 02:00-04:00 | 04:00-06:00 | 06:00-08:00
08:00-10:00 | 10:00-12:00 | 12:00-14:00 | 14:00-16:00
16:00-18:00 | 18:00-20:00 | 20:00-22:00 | 22:00-24:00
```

每个时段的操作流程：
1. **数据采集** (前5分钟): 同步最新表现数据
2. **分析决策** (5-10分钟): 计算效率评分，生成优化建议
3. **执行调整** (10-15分钟): 执行位置倾斜等调整
4. **记录日志** (15-20分钟): 记录执行结果

---

## 4. 调整后的系统配置

### 4.1 执行频率控制配置

```typescript
const API_RATE_LIMITS = {
  // 基础限制
  maxTPS: 1,                    // 每秒最大请求数（保守值）
  maxTPD: 8640,                 // 每日最大请求数
  
  // 执行频率限制
  bidAdjustment: {
    cooldownHours: 24,          // 同一投放词出价调整冷却期
    maxPerBatch: 100,           // 每批次最大调整数量
  },
  
  budgetAdjustment: {
    cooldownHours: 24,          // 同一活动预算调整冷却期
  },
  
  placementAdjustment: {
    cooldownHours: 2,           // 位置倾斜调整冷却期（每2小时1次）
    maxPerDay: 12,              // 每活动每日最大调整次数
  },
  
  dataSync: {
    intervalHours: 2,           // 数据同步间隔
    maxCallsPerSync: 200,       // 每次同步最大API调用
  },
};
```

### 4.2 请求队列管理

```typescript
const REQUEST_QUEUE_CONFIG = {
  // 请求间隔（毫秒）
  minRequestInterval: 1000,     // 最小1秒间隔
  
  // 重试策略
  maxRetries: 3,
  retryDelayMs: 5000,           // 重试延迟5秒
  
  // 429错误处理
  throttleBackoffMs: 60000,     // 被限流后等待60秒
  
  // 优先级
  priorities: {
    critical: 1,                // 紧急操作
    high: 2,                    // 高优先级
    normal: 3,                  // 普通操作
    low: 4,                     // 低优先级
  },
};
```

---

## 5. 与Adspert对比

| 对比项 | Adspert | 我们的系统 | 说明 |
|-------|---------|-----------|------|
| **时段分析** | 2小时/时段 | 2小时/时段 | ✅ 一致 |
| **出价调整频率** | 24小时1次/词 | 24小时1次/词 | ✅ 一致 |
| **预算调整频率** | 24小时1次/活动 | 24小时1次/活动 | ✅ 一致 |
| **位置倾斜频率** | 每周2次 | 每2小时1次 | ⬆️ 更激进 |
| **批量操作限制** | 100个/次 | 100个/次 | ✅ 一致 |

**注意**: 我们的位置倾斜调整频率（每2小时1次）比Adspert（每周2次）更激进，这是根据您的要求设计的。如果需要更保守的策略，可以调整为每日1-2次。

---

## 6. 风险控制

### 6.1 API限流风险

| 风险 | 影响 | 缓解措施 |
|-----|------|---------|
| 超过TPS限制 | 请求被拒绝 | 请求队列+速率限制 |
| 超过TPD限制 | 当日无法调用 | 预算分配+优先级队列 |
| 连续30天无销售 | 失去API访问 | 监控销售数据+预警 |

### 6.2 调整幅度限制

为避免频繁调整影响广告表现，设置以下安全边界：

| 调整类型 | 单次最大调整幅度 | 每日累计最大调整 |
|---------|----------------|-----------------|
| 出价调整 | ±30% | ±50% |
| 预算调整 | ±50% | ±100% |
| 位置倾斜 | ±20% | ±50% |

---

## 7. 结论与建议

### 7.1 关键结论

1. **API限制是核心约束**: 初始阶段1 TPS + 8,640 TPD是硬性限制
2. **2小时时段分析可行**: 在API限制内，每2小时执行一次分析和调整是可行的
3. **位置倾斜高频调整需谨慎**: 每2小时调整一次位置倾斜比Adspert激进，需要监控效果

### 7.2 实施建议

1. **第一阶段**: 实现基础的2小时数据同步和分析
2. **第二阶段**: 实现位置倾斜自动调整（先从每日1次开始）
3. **第三阶段**: 根据效果逐步提高调整频率至每2小时1次
4. **持续监控**: 建立API调用监控面板，实时跟踪使用量

---

## 参考资料

[1] Amazon Advertising API - Rate Limiting: https://advertising.amazon.com/API/docs/en-us/concepts/rate-limiting

[2] Rollout - Amazon Ads API Essential Guide: https://rollout.com/integration-guides/amazon-advertising/api-essentials

[3] Amazon Advertising API - Limits and Constraints: https://advertising.amazon.com/API/docs/en-us/reference/concepts/limits

[4] DSP Bid Adjustments Rate and Size Limits: https://advertising.amazon.com/API/docs/en-us/guides/dsp/bid-adjustments/limits
